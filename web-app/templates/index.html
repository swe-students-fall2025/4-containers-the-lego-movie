<!DOCTYPE html>
<html>
  <head><title>Project Name</title></head>
  <body>
    <h1>Project Name</h1>
    <!-- <ul>
      {% for r in results %}
        <li>{{ r.result }} (confidence: {{ r.confidence }})</li>
      {% endfor %}

      h1>
    </ul> -->

    <video id="preview" autoplay playsinline width="300"></video>
    <button id="captureBtn">Take Photo</button>

    <script>
      // Convert Blob â†’ Base64
      function blobToBase64(blob) {
        return new Promise(function (resolve) {
          const reader = new FileReader();
          reader.onloadend = function () {
            resolve(reader.result.split(",")[1]);
          };
          reader.readAsDataURL(blob);
        });
      }

      // Start camera
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(function (stream) {
          const video = document.getElementById("preview");
          video.srcObject = stream;

          // On click, take photo
          document.getElementById("captureBtn").onclick = function () {
            const track = stream.getVideoTracks()[0];
            const capture = new ImageCapture(track);

            capture.takePhoto()                     
              .then(function (blob) {
                return blobToBase64(blob);           
              })
              .then(function (base64) {
                console.log("Base64:", base64);      
              })
              .catch(function (err) {
                console.error("Error taking photo:", err);
              });
          };
        })
        .catch(function (err) {
          console.error("Could not open camera:", err);
        });
    </script>
    
  </body>
</html>
